{% comment %}
------------------------------------------------------------------------------
  Snippet: Responsive background image.
  - Creates a style tag containing "background-image" properties to load the
  correct image depending on the resolution.

  - Dependencies:
  -- Lazysizes plugin (https://github.com/aFarkas/lazysizes) which enable
  responsive image with faster load time and better performance.
  -- Lazysizes Bgset (https://github.com/aFarkas/lazysizes/tree/gh-pages/plugins/bgset)
  to use responsive images on background-image (CSS)

  - Accepts:
  -- image: {Object} Image object

  - Usage:
  -- In your liquid template file, copy the following line:

  <div class="lazyload" data-bgset="{% render 'responsive-bg-image', image: article.image %}">
  </div>
------------------------------------------------------------------------------
{% endcomment %}
{% if image != blank %}
  {% if image.width > 180 %}
    {{ image.cloudinary_src | append: 'w_180,h_'}}{{180 | divided_by: image.aspect_ratio | round }} 180w {{ 180 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 360 %}
    {{ image.cloudinary_src | append: 'w_360,h_'}}{{360 | divided_by: image.aspect_ratio | round }} 360w {{ 360 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 540 %}
    {{ image.cloudinary_src | append: 'w_540,h_'}}{{540 | divided_by: image.aspect_ratio | round }} 540w {{ 540 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 720 %}
    {{ image.cloudinary_src | append: 'w_720,h_'}}{{720 | divided_by: image.aspect_ratio | round }} 720w {{ 720 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 900 %}
    {{ image.cloudinary_src | append: 'w_900,h_'}}{{900 | divided_by: image.aspect_ratio | round }} 900w {{ 900 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 1080 %}
    {{ image.cloudinary_src | append: 'w_1080,h_'}}{{1080 | divided_by: image.aspect_ratio | round }} 1080w {{ 1080 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 1296 %}
    {{ image.cloudinary_src | append: 'w_1296,h_'}}{{1296 | divided_by: image.aspect_ratio | round }} 1296w {{ 1296 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 1512 %}
    {{ image.cloudinary_src | append: 'w_1512,h_'}}{{1512 | divided_by: image.aspect_ratio | round }} 1512w {{ 1512 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 1728 %}
    {{ image.cloudinary_src | append: 'w_1728,h_'}}{{1728 | divided_by: image.aspect_ratio | round }} 1728w {{ 1728 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 1944 %}
    {{ image.cloudinary_src | append: 'w_1944,h_'}}{{1944 | divided_by: image.aspect_ratio | round }} 1944w {{ 1944 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 2160 %}
    {{ image.cloudinary_src | append: 'w_2160,h_'}}{{2160 | divided_by: image.aspect_ratio | round }} 2160w {{ 2160 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 2376 %}
    {{ image.cloudinary_src | append: 'w_2376,h_'}}{{2376 | divided_by: image.aspect_ratio | round }} 2376w {{ 2376 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 2592 %}
    {{ image.cloudinary_src | append: 'w_2592,h_'}}{{2592 | divided_by: image.aspect_ratio | round }} 2592w {{ 2592 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 2808 %}
    {{ image.cloudinary_src | append: 'w_2808,h_'}}{{2808 | divided_by: image.aspect_ratio | round }} 2808w {{ 2808 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% if image.width > 3024 %}
    {{ image.cloudinary_src | append: 'w_3024,h_'}}{{3024 | divided_by: image.aspect_ratio | round }} 3024w {{ 3024 | divided_by: image.aspect_ratio | round }}h,
  {% endif %}

  {% assign image_size = 'w_' | append: image.width %}
  {{ image.cloudinary_src | append: 'w_' }}{{ image.width | append: ',h_'}}{{ image.height }} {{ image.width }}w {{ image.height }}h
{% endif %}
